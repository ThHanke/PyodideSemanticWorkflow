@base <https://github.com/ThHanke/PyodideSemanticWorkflow/> .
@prefix :   <https://github.com/ThHanke/PyodideSemanticWorkflow/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix qudt: <http://qudt.org/schema/qudt/> .
@prefix unit: <http://qudt.org/vocab/unit/> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix bfo:  <https://example.org/bfo/> .

#################################################################

# Engine (Pyodide) as a PROV SoftwareAgent

#################################################################

:PyodideEngine a prov:SoftwareAgent ;
  prov:label "Pyodide JavaScript/WASM Python runtime" ;
  prov:atLocation <https://www.npmjs.com/package/pyodide> .

#################################################################

# Artefacts: requirements file + Python code

#################################################################

:SumRequirements a prov:Entity ;
  prov:label "Python requirements.txt for sum node" ;
  prov:atLocation <https://raw.githubusercontent.com/ThHanke/PyodideSemanticWorkflow/refs/heads/main/requirements.txt> .

:SumCode a prov:Entity ;
  prov:label "Python script implementing sum for QUDT quantities" ;
  prov:atLocation <https://raw.githubusercontent.com/ThHanke/PyodideSemanticWorkflow/refs/heads/main/sum_mm.py> .

#################################################################

# Plan: how to run this node

#################################################################

:SumNodePlan a prov:Plan ;
  prov:label "Plan: sum two QUDT QuantityValues in millimeters using Pyodide" ;
  # The app can inspect these prov:used links to know what to load
  prov:used :PyodideEngine, :SumRequirements, :SumCode .

#################################################################

# Inputs: two QUDT quantity values in millimeters

#################################################################

:inputLength1 a qudt:QuantityValue ;
  qudt:numericValue "2.0"^^xsd:decimal ;
  qudt:unit unit:MilliM .

:inputLength2 a qudt:QuantityValue ;
  qudt:numericValue "3.0"^^xsd:decimal ;
  qudt:unit unit:MilliM .

#################################################################

# Activity describing this specific run

#################################################################

:SumRun_1 a prov:Activity ;
  prov:label "Execution: sum two millimeter values" ;
  prov:hadPlan :SumNodePlan ;
  prov:used :inputLength1, :inputLength2 ;
  prov:wasAssociatedWith :PyodideEngine .

# Explicit BFO-style input links to the Activity

:inputLength1 bfo:is_input_of :SumRun_1 .
:inputLength2 bfo:is_input_of :SumRun_1 .

#################################################################

# Result (this is what the Python code will add)

#################################################################

#:sumResult1 a qudt:QuantityValue ;
#  qudt:numericValue "5.0"^^xsd:decimal ;
#  qudt:unit unit:MilliM ;
#  prov:wasGeneratedBy :SumRun_1 ;
#  prov:wasDerivedFrom :inputLength1, :inputLength2 .